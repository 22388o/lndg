{% extends "base.html" %}
{% block title %} {{ block.super }} - Channel Info{% endblock %}
{% block content %}
{% load humanize %}
{% if channel %}
<div class="w3-container w3-padding-small">
  <h2>Details For Channel: {{ chan_id }} | Peer: <a href="{{ graph_links }}/{{ network }}node/{{ channel.remote_pubkey }}" target="_blank">{% if channel.alias != "" %}{{ channel.alias }}{% else %}{{ channel.remote_pubkey }}{% endif %}</a></h2>
  <h3>Capacity: {{ channel.capacity|intcomma }} | Is Open: {{ channel.is_open }} | Is Active: {{ channel.is_active }}</h3>
  <h4>Channel Point: <a href="{{ network_links }}/{{ network }}tx/{{ channel.funding_txid }}" target="_blank">{{ channel.funding_txid }}:{{ channel.output_index }}</a> | Opened In: <a href="{{ network_links }}/{{ network }}block/{{ channel.open_block }}" target="_blank">{{ channel.open_block|intcomma }}</a></h4>
  <h4>Outbound Liquidity: {{ channel.local_balance|intcomma }} ({{ channel.out_percent }}%) | Inbound Liquidity: {{ channel.remote_balance|intcomma }} ({{ channel.in_percent }}%)</h4>
</div>
<div class="w3-container w3-padding-small">
  <h3>Routing Events</h3>
  <h4>1-Day Routed Out: {{ channel.amt_routed_out_1day|intcomma }}  ({{ channel.routed_out_1day|intcomma }}) | Routed In: {{ channel.amt_routed_in_1day|intcomma }} ({{ channel.routed_in_1day|intcomma }})</h4>
  <h4>7-Day Routed Out: {{ channel.amt_routed_out_7day|intcomma }}  ({{ channel.routed_out_7day|intcomma }}) | Routed In: {{ channel.amt_routed_in_7day|intcomma }} ({{ channel.routed_in_7day|intcomma }})</h4>
  <h4>30-Day Routed Out: {{ channel.amt_routed_out_30day|intcomma }}  ({{ channel.routed_out_30day|intcomma }}) | Routed In: {{ channel.amt_routed_in_30day|intcomma }} ({{ channel.routed_in_30day|intcomma }})</h4>
  <h4>Lifetime Routed Out: {{ channel.amt_routed_out|intcomma }}  ({{ channel.routed_out|intcomma }}) | Routed In: {{ channel.amt_routed_in|intcomma }} ({{ channel.routed_in|intcomma }})</h4>
</div>
<div class="w3-container w3-padding-small">
  <h3>Rebalancing Events</h3>
  <h4>1-Day Rebalanced Out: {{ channel.amt_rebal_out_1day|intcomma }}  ({{ channel.rebal_out_1day|intcomma }}) | Rebalanced In: {{ channel.amt_rebal_in_1day|intcomma }} ({{ channel.rebal_in_1day|intcomma }})</h4>
  <h4>7-Day Rebalanced Out: {{ channel.amt_rebal_out_7day|intcomma }}  ({{ channel.rebal_out_7day|intcomma }}) | Rebalanced In: {{ channel.amt_rebal_in_7day|intcomma }} ({{ channel.rebal_in_7day|intcomma }})</h4>
  <h4>30-Day Rebalanced Out: {{ channel.amt_rebal_out_30day|intcomma }}  ({{ channel.rebal_out_30day|intcomma }}) | Rebalanced In: {{ channel.amt_rebal_in_30day|intcomma }} ({{ channel.rebal_in_30day|intcomma }})</h4>
  <h4>Lifetime Rebalanced Out: {{ channel.amt_rebal_out|intcomma }}  ({{ channel.rebal_out|intcomma }}) | Rebalanced In: {{ channel.amt_rebal_in|intcomma }} ({{ channel.rebal_in|intcomma }})</h4>
</div>
<div class="w3-container w3-padding-small">
  <h3>Profitability</h3>
  <h4>1-Day Revenue: {{ channel.revenue_1day|intcomma }} | Costs: {{ channel.costs_1day|intcomma }} | Profits: {{ channel.amt_rebal_in_1day|intcomma }} [{{ channel.apy_1day }}%] | Assisted Revenues: {{ channel.revenue_assist_1day|intcomma }}</h4>
  <h4>7-Day Revenue: {{ channel.revenue_7day|intcomma }} | Costs: {{ channel.costs_7day|intcomma }} | Profits: {{ channel.amt_rebal_in_7day|intcomma }} [{{ channel.apy_7day }}%] | Assisted Revenues: {{ channel.revenue_assist_7day|intcomma }}</h4>
  <h4>30-Day Revenue: {{ channel.revenue_30day|intcomma }} | Costs: {{ channel.costs_30day|intcomma }} | Profits: {{ channel.amt_rebal_in_30day|intcomma }} [{{ channel.apy_30day }}%] | Assisted Revenues: {{ channel.revenue_assist_30day|intcomma }}</h4>
  <h4>Lifetime Revenue: {{ channel.revenue|intcomma }} | Costs: {{ channel.costs|intcomma }} | Profits: {{ channel.amt_rebal_in|intcomma }} [{{ channel.apy }}%] | Assisted Revenues: {{ channel.revenue_assist|intcomma }}</h4>
</div>
{% if outgoing_htlcs %}
<div class="w3-container w3-padding-small">
  <h2>Outgoing HTLCs</h2>
  <table class="w3-table-all w3-centered w3-hoverable">
    <tr>
      <th>Forwarding Channel</th>
      <th>Forwarding Alias</th>
      <th>Amount</th>
      <th>Expiration Height</th>
      <th width=35%>Hash Lock</th>
    </tr>
    {% for htlc in outgoing_htlcs %}
    <tr>
      <td>{{ htlc.forwarding_channel }}</td>
      <td>{{ htlc.forwarding_alias }}</td>
      <td>{{ htlc.amount|intcomma }}</td>
      <td>{{ htlc.expiration_height|intcomma }}</td>
      <td>{{ htlc.hash_lock }}</td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endif %}
{% if incoming_htlcs %}
<div class="w3-container w3-padding-small">
  <h2>Incoming HTLCs</h2>
  <table class="w3-table-all w3-centered w3-hoverable">
    <tr>
      <th>Forwarding Channel</th>
      <th>Forwarding Alias</th>
      <th>Amount</th>
      <th>Expiration Height</th>
      <th width=35%>Hash Lock</th>
    </tr>
    {% for htlc in incoming_htlcs %}
    <tr>
      <td>{{ htlc.forwarding_channel }}</td>
      <td>{{ htlc.forwarding_alias }}</td>
      <td>{{ htlc.amount|intcomma }}</td>
      <td>{{ htlc.expiration_height|intcomma }}</td>
      <td>{{ htlc.hash_lock }}</td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endif %}
{% endif %}
{% if not channel %}
<div class="w3-container w3-padding-small">
  <center><h1>No data found for this channel!</h1></center>
</div>
{% endif %}
{% endblock %}